<!DOCTYPE html>
<html>

<head>
    <title>Circuits on World Map</title>
    <script src="https://cdn.jsdelivr.net/npm/vega@5.22.1"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5.2.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.20.8"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
        }
        h1 {
            text-align: center;
        }
        p {
            width: 800px;
            margin: 20px auto;
        }
        #vis {
            margin-top: 30px;
        }
    </style>
</head>

<body>
    <h1>Circuits on World Map</h1>
    <p>
        This visualization represents the locations of various circuits around the world. The data includes the names, locations, and countries of these circuits. Hover over the points on the map to view more details about each circuit.
    </p>
    <div id="vis"></div>
    <script>
        const spec = {
            "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
            "title": "Circuits on World Map",
            "width": 800,
            "height": 400,
            "data": {
                "url": "https://raw.githubusercontent.com/thomasgia12/assignment2/main/js/ne_110m.topojson",
                "format": {
                    "type": "topojson",
                    "feature": "countries"
                }
            },
            "projection": { "type": "equalEarth" },
            "layer": [
                {
                    "mark": { "type": "geoshape", "fill": "lightgray", "stroke": "white" }
                },
                {
                    "data": {
                        "url": "https://raw.githubusercontent.com/FIT3179/Vega-Lite/main/7_others/oceans.topojson",
                        "format": { "type": "topojson", "feature": "oceans" }
                    },
                    "mark": { "type": "geoshape", "fill": "skyblue" }
                },
                {
                    "data": {
                        "url": "https://raw.githubusercontent.com/thomasgia12/assignment2/main/data/circuits.csv",
                        "format": { "type": "csv" }
                    },
                    "mark": {
                        "type": "circle",
                        "color": "red"
                    },
                    "encoding": {
                        "longitude": { "field": "lng", "type": "quantitative" },
                        "latitude": { "field": "lat", "type": "quantitative" },
                        "tooltip": [
                            { "field": "name", "type": "nominal", "title": "Circuit Name" },
                            { "field": "location", "type": "nominal", "title": "Location" },
                            { "field": "country", "type": "nominal", "title": "Country" }
                        ]
                    }
                }
            ],
            "config": {}
        };

        vegaEmbed("#vis", spec, { mode: "vega-lite" }).then(console.log).catch(console.warn);
    </script>
</body>
</html>
